import{d as z,A,r as _,b as K,c as a,B as L,o as r,k as D,w as t,f as g,t as O,e as $,p as F,g as e,h as p,C as P,i as X,m as Z,D as ee,y as te,z as le,_ as ae}from"./index-5927132b.js";import{a as oe,b as ne,e as se}from"./user-15dceef1.js";import"./request-7267a692.js";const ie={class:"el-dialog__title"},ue={key:0,class:"color-danger m-l-5 text-3.5"},de={class:"dialog-footer"},re=z({__name:"model-save",props:{modalTitle:{},editData:{},requestApi:{}},emits:["close"],setup(h,{emit:q}){var C;const U=h,c=(C=A())==null?void 0:C.proxy,d=_(!1),k=U.modalTitle==="修改模型",s=_(),i=K(U.editData),V={userName:[{required:!0,message:"请输入模型名称"}],email:[{required:!0,message:"请输入模型编码"}],status:[{required:!0,message:"请输入模型所在数据库表"}]},b=(u=!1)=>{q("close",u)},S=u=>{u&&u.validate(n=>{n&&(d.value=!0,U.requestApi(i).then(({msg:N})=>{c==null||c.$message.success(N??"操作成功"),b(!0)}).finally(()=>{d.value=!1}))})};return(u,n)=>{const N=a("el-input"),y=a("el-form-item"),w=a("el-radio"),R=a("el-radio-group"),m=a("el-form"),o=a("el-button"),I=a("el-dialog"),x=L("loading");return r(),D(I,{"model-value":!0,width:"35%","close-on-click-modal":!1,"before-close":()=>b()},{header:t(()=>[g("span",ie,O(u.modalTitle),1),k?(r(),$("span",ue,"提示：修改后可能导致物料设置的失效")):F("",!0)]),footer:t(()=>[g("span",de,[e(o,{loading:d.value,onClick:n[3]||(n[3]=f=>b())},{default:t(()=>[p("取消")]),_:1},8,["loading"]),e(o,{loading:d.value,type:"primary",onClick:n[4]||(n[4]=f=>S(s.value))},{default:t(()=>[p(" 提交 ")]),_:1},8,["loading"])])]),default:t(()=>[P((r(),D(m,{ref_key:"ruleFormRef",ref:s,model:i,rules:V,"label-width":"auto","label-position":"right"},{default:t(()=>[e(y,{prop:"userName",label:"用户名称"},{default:t(()=>[e(N,{modelValue:i.userName,"onUpdate:modelValue":n[0]||(n[0]=f=>i.userName=f),modelModifiers:{trim:!0},placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1}),e(y,{prop:"email",label:"用户邮箱"},{default:t(()=>[e(N,{modelValue:i.email,"onUpdate:modelValue":n[1]||(n[1]=f=>i.email=f),modelModifiers:{trim:!0},placeholder:"请输入用户邮箱",disabled:k},null,8,["modelValue"])]),_:1}),e(y,{prop:"status",label:"用户状态"},{default:t(()=>[e(R,{modelValue:i.status,"onUpdate:modelValue":n[2]||(n[2]=f=>i.status=f)},{default:t(()=>[e(w,{value:"1"},{default:t(()=>[p("冻结")]),_:1}),e(w,{value:"2"},{default:t(()=>[p("正常")]),_:1}),e(w,{value:"3"},{default:t(()=>[p("锁定")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[x,d.value]])]),_:1},8,["before-close"])}}}),pe=h=>(te("data-v-c7ae1047"),h=h(),le(),h),ce=pe(()=>g("div",{class:"mask-group f-c-b"},[g("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"促销敏感人群复购"),g("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"团购场景营销"),g("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"节假日精准营销"),g("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"新用户复购"),g("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"实时天气精准营销")],-1)),me={key:0,style:{color:"#e6a23c","font-weight":"bolder"}},_e={key:1,style:{color:"#67c23a","font-weight":"bolder"}},fe={key:2,style:{color:"#f56c6c","font-weight":"bolder"}},ve={key:3},ge=z({name:"internal-menu"}),be=z({...ge,setup(h){var R;const q=(R=A())==null?void 0:R.proxy,U=X(),c=_({userName:"",status:""}),d=_(!1),k=_([]),s=_({pageSize:10,pageNo:1,total:0}),i=_({}),V=_(!1),b=_(),S=_(),C=()=>{s.value={pageSize:10,pageNo:1,total:0}},u=()=>{d.value=!0,oe({...c.value,...s.value}).then(m=>{s.value.total=m.data.totalNumber,k.value=m.data.list}).finally(()=>{d.value=!1})};u();function n(){C(),k.value=[],u()}function N(){q==null||q.$resetForm("queryRef"),C(),u()}const y=(m,o)=>{if(m==="add"){V.value=!0,b.value="新增用户",i.value={status:"1"},S.value=ne;return}if(m==="edit"&&o){V.value=!0,b.value="修改用户",S.value=se,i.value={...o};return}},w=m=>{V.value=!1,m&&u()};return(m,o)=>{const I=a("LyPageWrapper"),x=a("el-button"),f=a("el-input"),T=a("el-form-item"),B=a("el-option"),M=a("el-select"),Q=a("el-form"),v=a("el-table-column"),W=a("InfoFilled"),E=a("el-icon"),Y=a("el-tooltip"),j=a("el-table"),G=a("ly-pagination"),H=L("loading");return r(),$("div",null,[e(I,{title:"快速开始一个营销策略",class:"mb16px"},{default:t(()=>[ce]),_:1}),e(I,{title:Z(U).meta.title},{toolButton:t(()=>[e(x,{type:"primary",icon:"plus",onClick:o[0]||(o[0]=l=>y("add"))},{default:t(()=>[p(" 创建用户 ")]),_:1})]),default:t(()=>[e(Q,{ref:"queryRef",model:c.value,inline:!0},{default:t(()=>[e(T,{prop:"userName"},{default:t(()=>[e(f,{modelValue:c.value.userName,"onUpdate:modelValue":o[1]||(o[1]=l=>c.value.userName=l),placeholder:"用户名称",clearable:"",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(T,{prop:"status"},{default:t(()=>[e(M,{modelValue:c.value.status,"onUpdate:modelValue":o[2]||(o[2]=l=>c.value.status=l),class:"select-brand",placeholder:"用户状态",clearable:"",onClear:C,style:{width:"200px"}},{default:t(()=>[e(B,{label:"冻结",value:1}),e(B,{label:"正常",value:2}),e(B,{label:"锁定",value:3})]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:t(()=>[e(x,{type:"primary",icon:"Search",loading:d.value,onClick:o[3]||(o[3]=l=>n())},{default:t(()=>[p(" 搜索 ")]),_:1},8,["loading"]),e(x,{icon:"Refresh",loading:d.value,onClick:N},{default:t(()=>[p(" 重置 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),P((r(),D(j,{data:k.value},{default:t(()=>[e(v,{label:"序号",type:"index",width:"55",align:"center"}),e(v,{label:"用户名称",prop:"userName"}),e(v,{label:"用户状态",prop:"status",width:"80"},{default:t(({row:l})=>[l.status==="1"?(r(),$("span",me,"冻结")):l.status==="2"?(r(),$("span",_e,"正常")):l.status==="3"?(r(),$("span",fe,[p(" 锁定 "),l.failReason!=null?(r(),D(Y,{key:0,content:l.failReason,placement:"top",effect:"light"},{default:t(()=>[e(E,{style:{transform:"translateY(2px)",cursor:"pointer"}},{default:t(()=>[e(W)]),_:1})]),_:2},1032,["content"])):F("",!0)])):(r(),$("span",ve,"--"))]),_:1}),e(v,{label:"创建人",prop:"createUser",align:"center"}),e(v,{label:"创建时间",prop:"createTime"}),e(v,{label:"更新时间",prop:"updateTime"}),e(v,{label:"备注",prop:"remark"}),e(v,{label:"操作",align:"center",width:"110",fixed:"right"},{default:t(({row:l})=>[e(x,{type:l.status===1||l.status===3?"":"primary",disabled:l.status===1||l.status===3,link:"",plain:"",onClick:J=>y("view",l)},{default:t(()=>[p(" 查看 ")]),_:2},1032,["type","disabled","onClick"]),e(x,{type:l.status===1?"":"primary",disabled:l.status===1,link:"",plain:"",onClick:J=>y("edit",l)},{default:t(()=>[p(" 修改 ")]),_:2},1032,["type","disabled","onClick"])]),_:1})]),_:1},8,["data"])),[[H,d.value]]),P(e(G,{page:s.value.pageNo,"onUpdate:page":o[4]||(o[4]=l=>s.value.pageNo=l),limit:s.value.pageSize,"onUpdate:limit":o[5]||(o[5]=l=>s.value.pageSize=l),total:s.value.total,onPagination:u},null,8,["page","limit","total"]),[[ee,s.value.total>0]])]),_:1},8,["title"]),V.value?(r(),D(re,{key:0,"modal-title":b.value,"edit-data":i.value,"request-api":S.value,onClose:w},null,8,["modal-title","edit-data","request-api"])):F("",!0)])}}});const ke=ae(be,[["__scopeId","data-v-c7ae1047"]]);export{ke as default};
//# sourceMappingURL=index-7649fc9f.js.map
